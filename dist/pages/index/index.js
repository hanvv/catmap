/*! For license information please see index.js.LICENSE.txt */
"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[421],{1020:function(e,t,n){var s=n(6540),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,n){var s,a={},i=null,u=null;for(s in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,s)&&!c.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:r,type:e,key:i,ref:u,props:a,_owner:o.current}}t.jsx=i,t.jsxs=i},4848:function(e,t,n){e.exports=n(1020)},8996:function(e,t,n){var s=n(8870),r=n(5544),a=n(6540),l=n(118),o=n(758),c=n.n(o);function i(e,t,n,s){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}i=function(e,t,n,s){function a(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!s,configurable:!s,writable:!s}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},i(e,t,n,s)}function u(){var e,t,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,s,r,a){var c=s&&s.prototype instanceof o?s:o,u=Object.create(c.prototype);return i(u,"_invoke",function(n,s,r){var a,o,c,i=0,u=r||[],d=!1,x={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return a=t,o=0,c=e,x.n=n,l}};function h(n,s){for(o=n,c=s,t=0;!d&&i&&!r&&t<u.length;t++){var r,a=u[t],h=x.p,f=a[2];n>3?(r=f===s)&&(c=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=h&&((r=n<2&&h<a[1])?(o=0,x.v=s,x.n=a[1]):h<f&&(r=n<3||a[0]>s||s>f)&&(a[4]=n,a[5]=s,x.n=f,o=0))}if(r||n>1)return l;throw d=!0,s}return function(r,u,f){if(i>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,f),o=u,c=f;(t=o<2?e:c)||!d;){a||(o?o<3?(o>1&&(x.n=-1),h(o,c)):x.n=c:x.v=c);try{if(i=2,a){if(o||(r="next"),t=a[r]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=a["return"])&&t.call(a),o<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),o=1);a=e}else if((t=(d=x.n<0)?c:n.call(s,x))!==l)break}catch(t){a=e,o=1,c=t}finally{i=1}}return{value:t,done:d}}}(n,r,a),!0),u}var l={};function o(){}function c(){}function d(){}t=Object.getPrototypeOf;var x=[][s]?t(t([][s]())):(i(t={},s,function(){return this}),t),h=d.prototype=o.prototype=Object.create(x);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,r,"GeneratorFunction")),e.prototype=Object.create(h),e}return c.prototype=d,i(h,"constructor",d),i(d,"constructor",c),c.displayName="GeneratorFunction",i(d,r,"GeneratorFunction"),i(h),i(h,r,"Generator"),i(h,s,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(u=function(){return{w:a,m:f}})()}function d(e,t,n,s,r,a,l){try{var o=e[a](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(s,r)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(s,r){var a=e.apply(t,n);function l(e){d(a,s,r,l,o,"next",e)}function o(e){d(a,s,r,l,o,"throw",e)}l(void 0)})}}var h={stamps:12,photos:45,level:"Cat Whisperer",badges:["Tsim Sha Tsui Patroller","Canned Food Tycoon"]},f={latitude:31.2079,longitude:121.4737,name:"\u4e0a\u6d77\u7530\u5b50\u574a"},p=function(){return new Promise(function(e,t){c().getLocation({type:"gcj02",success:function(t){e({latitude:t.latitude,longitude:t.longitude})},fail:function(e){console.warn("\u83b7\u53d6\u4f4d\u7f6e\u5931\u8d25:",e),t(e)}})})},m=function(){return{latitude:f.latitude,longitude:f.longitude}},g=function(e,t,n,s){var r=6371e3,a=(n-e)*Math.PI/180,l=(s-t)*Math.PI/180,o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return Math.round(r*c)},b=["Boss Orange","Mochi","Shadow","Luna","Coco","Neko","Mimi","Ginger","Whiskers","Bella","\u5c0f\u6a58","\u8c46\u8c46","\u9ed1\u70ad","\u96ea\u7403","\u82b1\u82b1"],j=["active","sleeping","hidden"],y=["https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=200&q=80","https://images.unsplash.com/photo-1573865526739-10659fec78a5?w=200&q=80","https://images.unsplash.com/photo-1495360019602-e001922271aa?w=200&q=80","https://images.unsplash.com/photo-1526336024174-e58f5cdd8e13?w=200&q=80","https://images.unsplash.com/photo-1533738363-b7f9aef128ce?w=200&q=80"],v=[["\ud83d\udc8a \u836f\u5e97\u5b88\u62a4\u8005","\ud83d\udc51 \u8857\u5934\u4e4b\u738b"],["\u2615 \u5496\u5561\u5e97\u7ecf\u7406","\ud83d\ude34 \u4e13\u4e1a\u5348\u7761"],["\ud83d\udc7b \u5fcd\u8005","\ud83d\udc1f \u9c7c\u8d29\u514b\u661f"],["\ud83c\udf19 \u591c\u884c\u8005","\ud83d\udc2d \u6355\u9f20\u8fbe\u4eba"],["\u2600\ufe0f \u6652\u592a\u9633\u4e13\u5bb6","\ud83c\udf80 \u989c\u503c\u62c5\u5f53"]],w=["\u8857\u533a\u91cc\u65e0\u53ef\u4e89\u8bae\u7684\u7edf\u6cbb\u8005\uff0c\u559c\u6b22\u5e72\u8d1d\u4f46\u8ba8\u538c\u6469\u6258\u8f66\u58f0\u3002","\u559c\u6b22\u7761\u5728\u5496\u5561\u673a\u4e0a\u56e0\u4e3a\u6696\u548c\uff0c\u6709\u96f6\u98df\u7684\u8bdd\u975e\u5e38\u53cb\u597d\u3002","\u5f88\u96be\u6293\u5230\uff0c\u901a\u5e38\u8eb2\u5728\u65e7\u4e66\u5e97\u7684\u7bb1\u5b50\u540e\u9762\u3002","\u591c\u95f4\u6d3b\u52a8\u7684\u795e\u79d8\u732b\u54aa\uff0c\u767d\u5929\u96be\u5f97\u4e00\u89c1\u3002","\u6700\u559c\u6b22\u5728\u9633\u5149\u4e0b\u6253\u76f9\u7684\u5c0f\u53ef\u7231\u3002"],N=function(e,t){var n=2*Math.random()*Math.PI,s=t*Math.sqrt(Math.random()),r=s/111320*Math.cos(n),a=s/(111320*Math.cos(e.latitude*Math.PI/180))*Math.sin(n);return{latitude:e.latitude+r,longitude:e.longitude+a}},S=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=[],s=0;s<t;s++){var r=N(e,2e3),a=g(e.latitude,e.longitude,r.latitude,r.longitude);n.push({id:String(s+1),name:b[s%b.length],avatar:y[s%y.length],coverImage:y[s%y.length],lat:r.latitude,lng:r.longitude,status:j[s%j.length],badges:v[s%v.length],distance:a,friendliness:Math.floor(5*Math.random())+1,description:w[s%w.length],lastSeen:F()})}return n.sort(function(e,t){return e.distance-t.distance})},F=function(){var e=["\u521a\u521a","5\u5206\u949f\u524d","10\u5206\u949f\u524d","30\u5206\u949f\u524d","1\u5c0f\u65f6\u524d","2\u5c0f\u65f6\u524d","\u6628\u5929"];return e[Math.floor(Math.random()*e.length)]},k="J2EBZ-LSNKD-HWL4B-PI6E5-6XNY6-KXBS2",E=function(e){var t=[];if(!e||e.length<2)return t;var n=e[0],s=e[1];t.push({latitude:n,longitude:s});for(var r=2;r<e.length;r+=2){var a=e[r]||0,l=e[r+1]||0;n+=1e-5*a,s+=1e-5*l,t.push({latitude:n,longitude:s})}return t},C=function(){var e=x(u().m(function e(t,n){var s,r,a,l,o,i;return u().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,console.log("\u5f00\u59cb\u83b7\u53d6\u6b65\u884c\u8def\u7ebf:",{from:t,to:n}),e.n=1,c().request({url:"https://apis.map.qq.com/ws/direction/v1/walking/",method:"GET",data:{from:"".concat(t.latitude,",").concat(t.longitude),to:"".concat(n.latitude,",").concat(n.longitude),key:k}});case 1:if(r=e.v,console.log("\u817e\u8baf\u5730\u56fe API \u8fd4\u56de:",r.data),0!==r.data.status||null===(s=r.data.result)||void 0===s||null===(s=s.routes)||void 0===s||!s[0]){e.n=2;break}if(a=r.data.result.routes[0],l=a.polyline||[],console.log("\u539f\u59cb polyline \u957f\u5ea6:",l.length),o=E(l),console.log("\u89e3\u6790\u540e\u8def\u7ebf\u70b9\u6570\u91cf:",o.length),o.length>0&&(console.log("\u8def\u7ebf\u8d77\u70b9:",o[0]),console.log("\u8def\u7ebf\u7ec8\u70b9:",o[o.length-1])),!(o.length>0)){e.n=2;break}return e.a(2,o);case 2:throw console.error("API \u8fd4\u56de\u9519\u8bef:",r.data.message||r.data.status),new Error(r.data.message||"\u8def\u7ebf\u89c4\u5212\u5931\u8d25");case 3:return e.p=3,i=e.v,console.error("\u83b7\u53d6\u6b65\u884c\u8def\u7ebf\u5931\u8d25:",i),e.a(2,[{latitude:t.latitude,longitude:t.longitude},{latitude:n.latitude,longitude:n.longitude}]);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}(),Y=n(4848),M=function(e){var t=e.onCatSelect,n=e.navigateToCat,s=(0,a.useState)({latitude:31.2079,longitude:121.4737}),o=(0,r.A)(s,2),i=o[0],d=o[1],h=(0,a.useState)(null),f=(0,r.A)(h,2),g=f[0],b=f[1],j=(0,a.useState)([]),y=(0,r.A)(j,2),v=y[0],w=y[1],N=(0,a.useState)(!0),F=(0,r.A)(N,2),k=F[0],E=F[1],M=(0,a.useState)(!1),A=(0,r.A)(M,2),T=A[0],z=A[1],_=(0,a.useState)([]),D=(0,r.A)(_,2),P=D[0],O=D[1],B=(0,a.useState)(!1),L=(0,r.A)(B,2),I=L[0],W=L[1],q=(0,a.useRef)(null),V=v.filter(function(e){return e&&void 0!==e.lat&&void 0!==e.lng}).map(function(e){var t={active:"#22C55E",sleeping:"#9CA3AF",hidden:"#FBBF24"},s=t[e.status]||"#FF9F43",r=(null===n||void 0===n?void 0:n.id)===e.id;return{id:Number(e.id),latitude:e.lat,longitude:e.lng,iconPath:"",width:r?40:30,height:r?40:30,callout:{content:r?"\ud83c\udfaf ".concat(e.name):"\ud83d\ude3a ".concat(e.name),display:"ALWAYS",padding:r?12:10,borderRadius:20,color:"#5D4037",bgColor:r?"#FFF3E0":"#FFFFFF",fontSize:r?14:13,borderWidth:r?4:3,borderColor:r?"#FF9F43":s,textAlign:"center",anchorX:0,anchorY:0},label:{content:"",color:"transparent",fontSize:1,anchorX:0,anchorY:0,bgColor:"transparent",borderWidth:0,borderColor:"transparent",borderRadius:0,padding:0,textAlign:"center"}}}),R=P.length>0?[{points:P,color:"#FF9F43",width:6,dottedLine:!1,arrowLine:!0,borderColor:"#FFFFFF",borderWidth:2}]:[];(0,a.useEffect)(function(){var e=function(){var e=x(u().m(function e(){var t,n;return u().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p();case 1:t=e.v,d(t),b(t),w(S(t,8)),e.n=3;break;case 2:e.p=2,e.v,n=m(),d(n),b(n),w(S(n,8));case 3:return e.p=3,E(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}();e(),setTimeout(function(){q.current=c().createMapContext("catmap")},500)},[]),(0,a.useEffect)(function(){n&&g?(console.log("=== \u5f00\u59cb\u89c4\u5212\u8def\u7ebf ==="),console.log("\u7528\u6237\u4f4d\u7f6e:",g),console.log("\u76ee\u6807\u732b\u54aa:",n.name),console.log("\u76ee\u6807\u5750\u6807:",{lat:n.lat,lng:n.lng}),G(g,{latitude:n.lat,longitude:n.lng})):O([])},[n,g]);var G=function(){var e=x(u().m(function e(t,n){var s,r;return u().w(function(e){while(1)switch(e.p=e.n){case 0:return W(!0),e.p=1,e.n=2,C(t,n);case 2:s=e.v,console.log("\u8bbe\u7f6e\u8def\u7ebf\u70b9:",s.length),O(s),s.length>0&&d({latitude:t.latitude,longitude:t.longitude}),e.n=4;break;case 3:e.p=3,r=e.v,console.error("\u83b7\u53d6\u8def\u7ebf\u5931\u8d25:",r),c().showToast({title:"\u8def\u7ebf\u89c4\u5212\u5931\u8d25",icon:"none"});case 4:return e.p=4,W(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t,n){return e.apply(this,arguments)}}(),U=function(){n&&c().openLocation({latitude:n.lat,longitude:n.lng,name:n.name,address:n.description||"\u732b\u54aa\u4f4d\u7f6e",scale:18})},$=function(){z(!0),w(S(i,8)),O([]),setTimeout(function(){return z(!1)},500),c().showToast({title:"\u5df2\u5237\u65b0\u732b\u54aa\u4f4d\u7f6e",icon:"none",duration:1500})},J=function(){var e=x(u().m(function e(){var t;return u().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p();case 1:t=e.v,d(t),b(t),c().showToast({title:"\u5df2\u5b9a\u4f4d\u5230\u60a8\u7684\u4f4d\u7f6e",icon:"none",duration:1500}),e.n=3;break;case 2:e.p=2,e.v,c().showToast({title:"\u65e0\u6cd5\u83b7\u53d6\u4f4d\u7f6e",icon:"none",duration:1500});case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),X=function(e){var n,s=(null===(n=e.detail)||void 0===n?void 0:n.markerId)||e.markerId,r=v.find(function(e){return Number(e.id)===s});r&&(null===t||void 0===t||t(r))},Z=function(e){var n,s=(null===(n=e.detail)||void 0===n?void 0:n.markerId)||e.markerId,r=v.find(function(e){return Number(e.id)===s});r&&(null===t||void 0===t||t(r))};return k?(0,Y.jsx)(l.Ss,{className:"absolute inset-0 flex items-center justify-center bg-_b_hFDFBF7_B",children:(0,Y.jsxs)(l.Ss,{className:"text-center",children:[(0,Y.jsx)(l.EY,{className:"text-4xl",children:"\ud83d\uddfa\ufe0f"}),(0,Y.jsx)(l.EY,{className:"block mt-2 text-_b_h5D4037_B",children:"\u6b63\u5728\u52a0\u8f7d\u5730\u56fe..."})]})}):(0,Y.jsxs)(l.Ss,{className:"relative w-full h-full",children:[(0,Y.jsx)(l.T5,{id:"catmap",className:"absolute inset-0 w-full h-full",latitude:i.latitude,longitude:i.longitude,scale:n?16:15,markers:V,polyline:R,showLocation:!0,onMarkerTap:X,onCalloutTap:Z,onError:function(e){return console.warn("\u5730\u56fe\u52a0\u8f7d\u9519\u8bef:",e)},enableOverlooking:!1,showScale:!1}),n&&(0,Y.jsxs)(l.Ss,{className:"absolute left-4 right-4 bg-white rounded-2xl p-3 z-10 flex items-center gap-3",style:{top:"110px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)"},children:[(0,Y.jsx)(l.EY,{className:"text-2xl",children:I?"\u23f3":"\ud83d\udeb6"}),(0,Y.jsxs)(l.Ss,{className:"flex-1",children:[(0,Y.jsx)(l.EY,{className:"text-_b_h5D4037_B font-bold",children:I?"\u6b63\u5728\u89c4\u5212\u8def\u7ebf...":"\u6b63\u5728\u524d\u5f80 ".concat(n.name)}),(0,Y.jsxs)(l.EY,{className:"text-gray-500 text-sm",children:["\u9884\u8ba1\u8ddd\u79bb ",n.distance,"m"]})]}),(0,Y.jsx)(l.Ss,{className:"px-3 py-2 bg-_b_hFF9F43_B rounded-xl",onClick:U,children:(0,Y.jsx)(l.EY,{className:"text-white text-sm font-bold",children:"\u5bfc\u822a"})})]}),(0,Y.jsx)(l.Ss,{className:"absolute right-4 w-12 h-12 bg-white rounded-full flex items-center justify-center z-10",style:{bottom:"130px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},onClick:J,children:(0,Y.jsx)(l.EY,{className:"text-xl",children:"\ud83d\udccd"})}),(0,Y.jsx)(l.Ss,{className:"absolute right-4 w-12 h-12 bg-white rounded-full flex items-center justify-center z-10",style:{bottom:"195px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},onClick:$,children:(0,Y.jsx)(l.EY,{className:"text-xl ".concat(T?"animate-spin":""),children:"\ud83d\udd04"})})]})},A=function(e){var t=e.currentView,n=e.onChangeView,s=e.onOpenDiscovery;return(0,Y.jsx)(l.Ss,{className:"absolute left-0 right-0 z-30 flex justify-center",style:{bottom:"calc(env(safe-area-inset-bottom, 0px) + 16px)"},children:(0,Y.jsxs)(l.Ss,{className:"relative flex items-center bg-white px-4",style:{borderRadius:"40px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",height:"64px",minWidth:"280px"},children:[(0,Y.jsxs)(l.Ss,{className:"flex-1 flex flex-col items-center justify-center py-2",onClick:function(){return n("map")},children:[(0,Y.jsx)(l.Ss,{className:"w-7 h-7 rounded-full flex items-center justify-center mb-1",style:{border:"map"===t?"2px solid #FF9F43":"2px solid transparent"},children:(0,Y.jsx)(l.EY,{style:{fontSize:"16px",color:"map"===t?"#FF9F43":"#9CA3AF"},children:"\ud83e\udded"})}),(0,Y.jsx)(l.EY,{style:{fontSize:"11px",color:"map"===t?"#FF9F43":"#9CA3AF",fontWeight:"map"===t?"600":"400"},children:"Explore"})]}),(0,Y.jsx)(l.Ss,{className:"flex items-center justify-center",style:{marginTop:"-24px"},children:(0,Y.jsx)(l.Ss,{className:"rounded-full flex items-center justify-center",style:{width:"60px",height:"60px",backgroundColor:"#FF9F43",boxShadow:"0 4px 15px rgba(255, 159, 67, 0.4)"},onClick:s,children:(0,Y.jsx)(l.EY,{style:{fontSize:"28px"},children:"\ud83d\udc3e"})})}),(0,Y.jsxs)(l.Ss,{className:"flex-1 flex flex-col items-center justify-center py-2",onClick:function(){return n("journal")},children:[(0,Y.jsx)(l.Ss,{className:"w-7 h-7 rounded-full flex items-center justify-center mb-1",style:{border:"journal"===t?"2px solid #FF9F43":"2px solid transparent"},children:(0,Y.jsx)(l.EY,{style:{fontSize:"16px",color:"journal"===t?"#FF9F43":"#9CA3AF"},children:"\ud83d\udcd3"})}),(0,Y.jsx)(l.EY,{style:{fontSize:"11px",color:"journal"===t?"#FF9F43":"#9CA3AF",fontWeight:"journal"===t?"600":"400"},children:"Journal"})]})]})})},T=function(e){var t=e.text,n=e.color,s=void 0===n?"bg-orange-100":n;return(0,Y.jsx)(l.EY,{className:"inline-block px-3 py-1 rounded-full text-xs font-bold text-_b_h5D4037_B ".concat(s," mr-2 mb-2 border border-_b_h5D4037_B_f10"),children:t})};const z=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),D=e=>{const t=_(e);return t.charAt(0).toUpperCase()+t.slice(1)},P=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),O=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var B={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const L=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:o,...c},i)=>(0,a.createElement)("svg",{ref:i,...B,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:P("lucide",r),...!l&&!O(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),I=(e,t)=>{const n=(0,a.forwardRef)(({className:n,...s},r)=>(0,a.createElement)(L,{ref:r,iconNode:t,className:P(`lucide-${z(D(e))}`,`lucide-${e}`,n),...s}));return n.displayName=D(e),n},W=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],q=I("x",W),V=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],R=I("heart",V),G=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],U=I("map-pin",G);var $=function(e){var t=e.cat,n=e.onClose,s=e.onViewProfile,o=(0,a.useState)(!1),c=(0,r.A)(o,2),i=c[0],u=c[1];return t?(0,Y.jsxs)(l.Ss,{className:"absolute inset-0 z-40 pointer-events-none flex items-end",children:[(0,Y.jsx)(l.Ss,{className:"absolute inset-0 bg-black_f20 backdrop-blur-_b1px_B pointer-events-auto transition-opacity duration-300",onClick:n}),(0,Y.jsxs)(l.Ss,{className:"relative w-full bg-_b_hFDFBF7_B rounded-t-_b30px_B shadow-_b0_-10px_40px_rgba_p0_m0_m0_m0_d1_P_B p-6 pb-24 pointer-events-auto transform transition-transform duration-300 animate-_bslideUp_0_d3s_ease-out_B",children:[(0,Y.jsx)(l.Ss,{className:"w-12 h-1_d5 bg-gray-300 rounded-full mx-auto mb-6 opacity-50"}),(0,Y.jsxs)(l.Ss,{className:"flex gap-4",children:[(0,Y.jsx)(l.Ss,{className:"shrink-0",onClick:function(){return s(t)},children:(0,Y.jsx)(l.Ss,{className:"w-24 h-24 rounded-2xl overflow-hidden shadow-md border-2 border-white",children:(0,Y.jsx)(l._V,{src:t.avatar,className:"w-full h-full object-cover"})})}),(0,Y.jsxs)(l.Ss,{className:"flex-1",children:[(0,Y.jsxs)(l.Ss,{className:"flex items-center justify-between",children:[(0,Y.jsxs)(l.Ss,{className:"flex items-center gap-2",children:[(0,Y.jsx)(l.EY,{className:"text-2xl font-bold font-rounded text-_b_h5D4037_B",children:t.name}),(0,Y.jsx)(l.Ss,{className:"text-sm bg-pink-100 text-pink-500 px-2 py-0_d5 rounded-full",children:(0,Y.jsx)(l.EY,{children:"\u2640"})})]}),(0,Y.jsx)(l.Ss,{onClick:n,className:"p-1 text-gray-400 hover_ctext-gray-600",children:(0,Y.jsx)(q,{size:20})})]}),(0,Y.jsx)(l.Ss,{className:"mt-2 flex flex-wrap",children:t.badges.map(function(e,t){return(0,Y.jsx)(T,{text:e},t)})}),(0,Y.jsxs)(l.Ss,{className:"mt-2 text-sm text-gray-500 flex flex-col gap-1",children:[(0,Y.jsxs)(l.Ss,{className:"flex items-center gap-1",children:[(0,Y.jsx)(R,{size:14,className:"text-red-400 fill-current"}),(0,Y.jsx)(l.EY,{children:"Friendliness:"}),(0,Y.jsxs)(l.EY,{className:"text-orange-400 tracking-widest",children:["\u2605".repeat(t.friendliness),"\u2606".repeat(5-t.friendliness)]})]}),(0,Y.jsxs)(l.Ss,{className:"flex items-center gap-1",children:[(0,Y.jsx)(U,{size:14,className:"text-blue-400"}),(0,Y.jsxs)(l.EY,{children:[t.distance,"m away"]})]})]})]})]}),(0,Y.jsxs)(l.Ss,{className:"mt-8 flex items-center gap-3",children:[(0,Y.jsxs)(l.Ss,{className:"flex-1 bg-_b_hFF9F43_B py-3_d5 rounded-2xl flex items-center justify-center gap-2",style:{boxShadow:"0 4px 12px rgba(255, 159, 67, 0.3)"},onClick:function(){return s(t)},children:[(0,Y.jsx)(l.EY,{className:"text-xl",children:"\ud83e\udded"}),(0,Y.jsx)(l.EY,{className:"text-white font-bold",children:"Take me there"})]}),(0,Y.jsx)(l.Ss,{className:"w-14 h-14 rounded-2xl flex items-center justify-center border-2 transition-all ".concat(i?"bg-red-50 border-red-200 text-red-500":"bg-white border-gray-100 text-gray-400"),onClick:function(e){e.stopPropagation(),u(!i)},children:(0,Y.jsx)(R,{size:24,fill:i?"currentColor":"none",className:"transition-transform ".concat(i?"scale-125":"")})})]})]})]}):null};const J=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],X=I("stamp",J),Z=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],K=I("medal",Z),H=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Q=I("award",H),ee=[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]],te=I("paw-print",ee);var ne=function(e){var t=e.stats;return(0,Y.jsxs)(l.Ss,{className:"h-full overflow-y-auto pb-32 no-scrollbar bg-_b_hFDFBF7_B",children:[(0,Y.jsxs)(l.Ss,{className:"bg-_b_h5D4037_B text-_b_hFDFBF7_B pt-12 pb-8 px-6 rounded-b-_b40px_B shadow-lg relative overflow-hidden",children:[(0,Y.jsx)(l.Ss,{className:"absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10",children:(0,Y.jsx)(X,{size:200})}),(0,Y.jsxs)(l.Ss,{className:"relative z-10 flex items-center gap-4",children:[(0,Y.jsx)(l.Ss,{className:"w-20 h-20 rounded-full border-4 border-_b_hFDFBF7_B_f20 overflow-hidden bg-orange-200",children:(0,Y.jsx)(l._V,{src:"https://picsum.photos/200/200",className:"w-full h-full object-cover"})}),(0,Y.jsxs)(l.Ss,{children:[(0,Y.jsx)(l.EY,{className:"text-2xl font-bold font-rounded block",children:"Meow Walker"}),(0,Y.jsx)(l.Ss,{className:"flex items-center gap-2 mt-1",children:(0,Y.jsxs)(l.EY,{className:"bg-_b_hFDFBF7_B_f20 px-3 py-0_d5 rounded-full text-xs font-bold backdrop-blur-sm",children:["Lv.5 ",t.level]})})]})]}),(0,Y.jsxs)(l.Ss,{className:"flex justify-between mt-8 text-center",children:[(0,Y.jsxs)(l.Ss,{children:[(0,Y.jsx)(l.EY,{className:"text-3xl font-bold font-rounded block",children:t.stamps}),(0,Y.jsx)(l.EY,{className:"text-xs opacity-70 uppercase tracking-wider block",children:"Stamps"})]}),(0,Y.jsxs)(l.Ss,{children:[(0,Y.jsx)(l.EY,{className:"text-3xl font-bold font-rounded block",children:t.photos}),(0,Y.jsx)(l.EY,{className:"text-xs opacity-70 uppercase tracking-wider block",children:"Photos"})]}),(0,Y.jsxs)(l.Ss,{children:[(0,Y.jsx)(l.EY,{className:"text-3xl font-bold font-rounded block",children:"14"}),(0,Y.jsx)(l.EY,{className:"text-xs opacity-70 uppercase tracking-wider block",children:"Days"})]})]})]}),(0,Y.jsxs)(l.Ss,{className:"p-6",children:[(0,Y.jsxs)(l.Ss,{className:"mb-4 flex items-center gap-2",children:[(0,Y.jsx)(K,{className:"text-_b_hFF9F43_B"}),(0,Y.jsx)(l.EY,{className:"text-_b_h5D4037_B font-bold text-lg",children:"My Badges"})]}),(0,Y.jsx)(l.Ss,{className:"grid grid-cols-2 gap-4 mb-8",children:t.badges.map(function(e,t){return(0,Y.jsxs)(l.Ss,{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-3",children:[(0,Y.jsx)(l.Ss,{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-2xl",children:(0,Y.jsx)(l.EY,{children:0===t?"\ud83d\udc6e":"\ud83e\udd6b"})}),(0,Y.jsx)(l.EY,{className:"text-sm font-bold text-_b_h5D4037_B leading-tight",children:e})]},t)})}),(0,Y.jsxs)(l.Ss,{className:"mb-4 flex items-center gap-2",children:[(0,Y.jsx)(Q,{className:"text-_b_hFF9F43_B"}),(0,Y.jsx)(l.EY,{className:"text-_b_h5D4037_B font-bold text-lg",children:"Stamp Collection"})]}),(0,Y.jsx)(l.Ss,{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7,8,9].map(function(e){return(0,Y.jsxs)(l.Ss,{className:"aspect-square rounded-xl flex items-center justify-center relative overflow-hidden group ".concat(e<=3?"bg-white shadow-sm":"bg-gray-100 opacity-60"),children:[(0,Y.jsx)(l.Ss,{className:"border-2 border-dashed border-gray-200 absolute inset-2 rounded-lg pointer-events-none"}),e<=3?(0,Y.jsx)(l._V,{src:"https://picsum.photos/100/100?random=".concat(e),className:"w-full h-full object-cover p-2 rounded-2xl"}):(0,Y.jsx)(te,{className:"text-gray-300"})]},e)})})]})]})},se=function(e){var t=e.onClose,n=(0,a.useState)(!1),s=(0,r.A)(n,2),o=s[0],c=s[1];return(0,a.useEffect)(function(){var e=setTimeout(function(){return c(!0)},100);return function(){return clearTimeout(e)}},[]),(0,Y.jsxs)(l.Ss,{className:"absolute inset-0 z-50 flex items-center justify-center",children:[(0,Y.jsx)(l.Ss,{className:"absolute inset-0 transition-opacity duration-300 ".concat(o?"opacity-100":"opacity-0"),style:{backgroundColor:"rgba(93, 64, 55, 0.9)"},onClick:t}),(0,Y.jsxs)(l.Ss,{className:"relative z-10 flex flex-col items-center gap-8 w-full px-8",children:[(0,Y.jsx)(l.EY,{className:"text-2xl font-bold mb-4 transition-all duration-500 ".concat(o?"opacity-100":"opacity-0"),style:{color:"#FDFBF7"},children:"What did you find?"}),(0,Y.jsxs)(l.Ss,{className:"flex gap-8 w-full justify-center",children:[(0,Y.jsxs)(l.Ss,{className:"flex flex-col items-center gap-3 transition-all duration-500 ".concat(o?"opacity-100":"opacity-0"),children:[(0,Y.jsx)(l.Ss,{className:"w-24 h-24 rounded-full flex items-center justify-center",style:{backgroundColor:"#FF9F43",boxShadow:"0 4px 15px rgba(255, 159, 67, 0.3)"},children:(0,Y.jsx)(l.EY,{className:"text-4xl",children:"\ud83d\udd0d"})}),(0,Y.jsx)(l.EY,{className:"font-bold",style:{color:"#FDFBF7"},children:"New Cat"})]}),(0,Y.jsxs)(l.Ss,{className:"flex flex-col items-center gap-3 transition-all duration-500 ".concat(o?"opacity-100":"opacity-0"),children:[(0,Y.jsx)(l.Ss,{className:"w-24 h-24 rounded-full flex items-center justify-center",style:{backgroundColor:"#2ED573",boxShadow:"0 4px 15px rgba(46, 213, 115, 0.3)"},children:(0,Y.jsx)(l.EY,{className:"text-4xl",children:"\ud83d\udcf8"})}),(0,Y.jsx)(l.EY,{className:"font-bold",style:{color:"#FDFBF7"},children:"Status Update"})]})]}),(0,Y.jsx)(l.Ss,{onClick:t,className:"mt-12 w-12 h-12 rounded-full flex items-center justify-center transition-all duration-500 ".concat(o?"opacity-100":"opacity-0"),style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:(0,Y.jsx)(l.EY,{className:"text-2xl",style:{color:"rgba(255, 255, 255, 0.6)"},children:"\u2715"})})]})]})};function re(){var e=(0,a.useState)("map"),t=(0,r.A)(e,2),n=t[0],s=t[1],o=(0,a.useState)(null),i=(0,r.A)(o,2),u=i[0],d=i[1],x=(0,a.useState)(!1),f=(0,r.A)(x,2),p=f[0],m=f[1],g=(0,a.useState)(!0),b=(0,r.A)(g,2),j=b[0],y=b[1],v=(0,a.useState)(""),w=(0,r.A)(v,2),N=w[0],S=w[1],F=(0,a.useState)(null),k=(0,r.A)(F,2),E=k[0],C=k[1],T=(0,a.useState)(50),z=(0,r.A)(T,2),_=z[0],D=z[1];(0,a.useEffect)(function(){try{var e=c().getMenuButtonBoundingClientRect();D(e.top)}catch(e){D(50)}var t=setTimeout(function(){return y(!1)},1500);return function(){return clearTimeout(t)}},[]);var P=function(e){C(e),d(null),c().showToast({title:"\u6b63\u5728\u89c4\u5212\u524d\u5f80 ".concat(e.name," \u7684\u8def\u7ebf"),icon:"none",duration:1500})},O=function(){N.trim()&&c().showToast({title:"\u641c\u7d22: ".concat(N),icon:"none",duration:1500})};return j?(0,Y.jsxs)(l.Ss,{className:"flex flex-col items-center justify-center h-screen bg-_b_hFDFBF7_B text-_b_h5D4037_B",children:[(0,Y.jsxs)(l.Ss,{className:"relative",children:[(0,Y.jsx)(l.Ss,{className:"w-16 h-16 border-4 border-_b_hFF9F43_B border-t-transparent rounded-full animate-spin"}),(0,Y.jsx)(l.Ss,{className:"absolute inset-0 flex items-center justify-center font-bold text-xl",children:"\ud83d\udc31"})]}),(0,Y.jsx)(l.EY,{className:"mt-4 font-bold",children:"Tracking paws..."})]}):(0,Y.jsxs)(l.Ss,{className:"flex flex-col h-screen bg-_b_hFDFBF7_B",children:["map"===n&&(0,Y.jsxs)(l.Ss,{className:"relative flex-1",children:[(0,Y.jsx)(l.Ss,{className:"absolute inset-0 z-0",children:(0,Y.jsx)(M,{onCatSelect:d,navigateToCat:E})}),(0,Y.jsx)(l.Ss,{className:"absolute z-20",style:{top:"".concat(_,"px"),left:"16px",right:"100px"},children:(0,Y.jsxs)(l.Ss,{className:"flex items-center gap-2",children:[(0,Y.jsx)(l.Ss,{className:"shrink-0 w-9 h-9 rounded-full overflow-hidden bg-white",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},onClick:function(){return s("journal")},children:(0,Y.jsx)(l._V,{src:"https://picsum.photos/100/100",className:"w-full h-full",mode:"aspectFill"})}),(0,Y.jsxs)(l.Ss,{className:"flex-1 h-9 bg-white rounded-full flex items-center px-3",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},children:[(0,Y.jsx)(l.EY,{className:"mr-1",children:"\ud83d\udd0d"}),(0,Y.jsx)(l.pd,{type:"text",placeholder:"Search: Orange Boss...",placeholderClass:"text-gray-400",className:"flex-1 text-sm text-_b_h5D4037_B",value:N,onInput:function(e){return S(e.detail.value)},onConfirm:O})]}),(0,Y.jsx)(l.Ss,{className:"shrink-0 w-9 h-9 rounded-full bg-white flex items-center justify-center",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.12)"},onClick:function(){return c().showToast({title:"\u7b5b\u9009\u529f\u80fd\u5f00\u53d1\u4e2d",icon:"none"})},children:(0,Y.jsx)(l.EY,{className:"text-gray-500",children:"\u2699\ufe0f"})})]})}),(0,Y.jsx)($,{cat:u,onClose:function(){return d(null)},onViewProfile:P})]}),"journal"===n&&(0,Y.jsx)(l.Ss,{className:"absolute inset-0 z-0",children:(0,Y.jsx)(ne,{stats:h})}),(0,Y.jsx)(A,{currentView:n,onChangeView:function(e){s(e),d(null)},onOpenDiscovery:function(){return m(!0)}}),p&&(0,Y.jsx)(se,{onClose:function(){return m(!1)}})]})}var ae={navigationStyle:"custom"};Page((0,s.eU)(re,"pages/index/index",{root:{cn:[]}},ae||{}))}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[907,96],function(){return t(8996)});e.O()}]);